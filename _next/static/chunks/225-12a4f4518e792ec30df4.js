(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{2073:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(1823),r=n(9525),s=n(2797),o=n(2469),a=n(5505),c=n(4021),l=n.n(c),d=n(5893);function u(e){var t,n=e.item,i=e.editor,r="card ".concat(n.isActive()&&i.isFocused?l().active:"");return null!=n.children?(0,d.jsxs)(a.fC,{children:[(0,d.jsxs)(a.xz,{className:r,children:[n.label,(0,d.jsx)(o.v4q,{})]}),(0,d.jsx)(a.VY,{onCloseAutoFocus:function(e){return e.preventDefault()},className:l().dropdown,children:null===(t=n.children)||void 0===t?void 0:t.map((function(e){return(0,d.jsx)(a.ck,{onSelect:function(){return e.action(i.chain().focus()).run()},className:"".concat(l().item," ").concat(e.isActive()?l().active:""),children:e.label},e.label.key)}))})]}):(0,d.jsx)("button",{onClick:function(){return n.action(i.chain().focus()).run()},className:r,children:n.label})}function h(e){var t=e.editor;if(null===t)return null;var n=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mark",r=arguments.length>3?arguments[3]:void 0;switch(i){case"mark":var s=t.state.selection,o=s.to-s.from;if(o>0)return e.toggleMark(n,r);break;case"node":var a=t.isActive(n,r)?"paragraph":n;return e.toggleNode(n,a,r)}return e},i=[{label:(0,d.jsx)(o.bHp,{},"heading"),action:function(e){return e},isActive:function(){return[1,2,3,4,5,6].map((function(e){return t.isActive("heading",{level:e})})).includes(!0)},children:[1,2,3,4,5,6].map((function(e){return{label:(0,d.jsx)("span",{children:1==e?"Title":"Heading ".concat(e)},e),action:function(t){return n(t,"heading","node",{level:e})},isActive:function(){return t.isActive("heading",{level:e})}}}))},{label:(0,d.jsx)(o.jVc,{}),action:function(e){return e},isActive:function(){return t.isActive("bulletList")||t.isActive("orderedList")},children:[{label:(0,d.jsx)("span",{children:"Bullet List"},"bullet"),action:function(e){return e.toggleBulletList()},isActive:function(){return t.isActive("bulletList")}},{label:(0,d.jsx)("span",{children:"Ordered List"},"ordered"),action:function(e){return e.toggleOrderedList()},isActive:function(){return t.isActive("orderedList")}},{label:(0,d.jsx)("span",{children:"Todo List (soon)"},"todo"),action:function(e){return e},isActive:function(){return!1}}]},{label:(0,d.jsx)(o.X20,{},"bold"),action:function(e){return n(e,"bold")},isActive:function(){return t.isActive("bold")}},{label:(0,d.jsx)(o.MzY,{},"italic"),action:function(e){return n(e,"italic")},isActive:function(){return t.isActive("italic")}},{label:(0,d.jsx)(o.dwl,{},"strike"),action:function(e){return n(e,"strike")},isActive:function(){return t.isActive("strike")}},{label:(0,d.jsx)(o.dNJ,{},"code"),action:function(e){return n(e,"code")},isActive:function(){return t.isActive("code")}},{label:(0,d.jsx)(o.PEf,{},"quote"),action:function(e){return e.toggleBlockquote()},isActive:function(){return t.isActive("blockquote")}},{label:(0,d.jsx)(o.d5f,{},"divider"),action:function(e){return e.setHorizontalRule()},isActive:function(){return t.isActive("horizontalRule")}}];return(0,d.jsx)("div",{className:l().toolbar,children:i.map((function(e){return(0,d.jsx)(u,{item:e,editor:t},e.label.key)}))})}function v(e){var t,n,o=s.Z.configure({placeholder:"Type something\u2026"}),a=(0,i.jE)({extensions:[r.Z,o],content:e.content,autofocus:!0,onCreate:null!==(t=e.onUpdate)&&void 0!==t?t:function(){},onUpdate:null!==(n=e.onUpdate)&&void 0!==n?n:function(){},editable:e.editable,editorProps:{attributes:{class:"card ".concat(l().editor_content)}}});return(0,d.jsxs)("div",{className:l().editor,children:[e.editable&&(0,d.jsx)(h,{editor:a}),(0,d.jsx)(i.kg,{editor:a})]})}},4824:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var i=n(4942),r=n(4925),s=n(9008),o=n(8083),a=n(1163),c=n(7294),l=n(1664),d=n(8042),u=n.n(d),h=n(5893);function v(){var e=(0,a.useRouter)().asPath,t=(0,o.Z)().status,n=function(){return t&&!e.includes("edit")?(0,h.jsxs)("section",{children:[(0,h.jsx)("h3",{children:"Meta"}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"Created at"}),(0,h.jsx)("span",{children:new Date(t.created).toDateString()})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"CID"}),(0,h.jsx)("span",{children:t.cid})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"Size"}),(0,h.jsxs)("span",{children:[t.dagSize," B"]})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"IPFS Pins"}),(0,h.jsx)("span",{children:t.pins.length})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"Storage Providers"}),(0,h.jsx)("span",{children:t.deals.length>0?t.deals.map((function(e,n){return(0,h.jsxs)(c.Fragment,{children:[(0,h.jsx)("a",{href:"https://filfox.info/en/deal/".concat(e.dealId),children:e.storageProvider}),n<t.deals.length-1&&(0,h.jsx)("span",{children:", "})]},e.dealId)})):"(None yet)"})]})]}):null};return(0,h.jsxs)("footer",{className:u().footer,children:[(0,h.jsx)(n,{}),(0,h.jsxs)("section",{children:[(0,h.jsx)("h3",{children:"About"}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"Groombridge"}),(0,h.jsx)(l.default,{href:"/view?cid=bafybeibrbqdz5dlfmczdumov4auwoafbfqgzeuymhq2ttf5ddalfcmn3su",children:(0,h.jsx)("a",{children:"Example document \u2192"})})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"What is this?"}),(0,h.jsx)("span",{children:"This is a side project I keep to experiment with technologies such as IPFS, Filecoin, Nextjs, React and more."})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"Built with"}),(0,h.jsxs)("span",{children:[(0,h.jsx)("a",{href:"https://tiptap.dev",children:"tiptap"}),(0,h.jsx)("span",{children:", "}),(0,h.jsx)("a",{href:"https://web3.storage",children:"Web3.Storage"}),(0,h.jsx)("span",{children:", "}),(0,h.jsx)("a",{href:"https://www.radix-ui.com",children:"Radix"}),(0,h.jsx)("span",{children:", "}),(0,h.jsx)("a",{href:"https://nextjs.org",children:"Next.js"})]})]}),(0,h.jsxs)(f,{children:[(0,h.jsx)("span",{children:"Open-source"}),(0,h.jsx)("a",{href:"https://github.com/ValentinWalter/Groombridge",children:"on GitHub"})]}),(0,h.jsx)(f,{children:(0,h.jsx)("a",{href:"https://valwal.com",children:"By valwal.com"})})]})]})}var f=function(e){return(0,h.jsx)("div",{className:u().item,children:e.children})},x=n(9954),p=n.n(x),j=n(2469),m=n(3251),_=n.n(m);function b(e){var t=e.title,n=e.onTitleChange,i=e.onSave,r=(0,o.Z)(),s=r.document,a=r.status,c="icon ".concat(_().icon);return void 0!==t?(0,h.jsxs)("nav",{className:_().titlebar,children:[(0,h.jsxs)("span",{className:_().title,children:[(0,h.jsx)(j.JtS,{className:c}),(0,h.jsx)("input",{type:"text",value:t,onChange:function(e){n&&n(e.target.value)},placeholder:"Document title..."})]}),(0,h.jsx)("button",{onClick:i,disabled:""==t,className:_().save,children:"Save"})]}):(0,h.jsxs)("nav",{className:_().titlebar,children:[(0,h.jsxs)("span",{className:_().title,children:[(0,h.jsx)(j.khe,{className:c}),null===s||void 0===s?void 0:s.title]}),(0,h.jsx)(l.default,{href:"/edit?cid=".concat(null===a||void 0===a?void 0:a.cid),passHref:!0,children:(0,h.jsx)("button",{className:_().save,children:"Edit"})}),(0,h.jsx)(l.default,{href:"/",passHref:!0,children:(0,h.jsx)("button",{onClick:function(){return sessionStorage.removeItem("session_document")},className:_().share,children:"New"})})]})}var g=["children"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=e.children,n=(0,r.Z)(e,g),i=(0,a.useRouter)();return(0,h.jsxs)("div",{className:p().container,children:[(0,h.jsxs)(s.default,{children:[(0,h.jsx)("title",{children:"Groombridge"}),(0,h.jsx)("meta",{name:"description",content:"Lightweight shareable text editor in the browser."}),(0,h.jsx)("link",{rel:"icon",href:"".concat(i.basePath,"/favicon.ico")})]}),(0,h.jsx)(b,y({},n)),t,(0,h.jsx)(v,{})]})}},2723:function(e,t,n){"use strict";var i,r=n(9036),s=n(4155),o=new r.xk({token:null!==(i=s.env.NEXT_PUBLIC_WEB3STORAGE_API_TOKEN)&&void 0!==i?i:""});t.Z=o},8083:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(5861),r=n(7757),s=n.n(r),o=n(1163),a=n(2503),c=n(2723),l=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,r,o,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get(t);case 2:return n=e.sent,e.next=5,null===n||void 0===n?void 0:n.files();case 5:return i=e.sent,r=null===i||void 0===i?void 0:i.flatMap((function(e){return e}))[0],e.next=9,c.Z.status(t);case 9:return o=e.sent,a=null===r||void 0===r?void 0:r.name,e.next=13,null===r||void 0===r?void 0:r.text();case 13:if(l=e.sent,!(a&&l&&o)){e.next=18;break}return e.abrupt("return",{document:{title:a,content:l},status:o});case 18:throw"Error";case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function d(){var e,t,n=null!==(e=null===(t=(0,o.useRouter)().query.cid)||void 0===t?void 0:t.toString())&&void 0!==e?e:"",i=(0,a.ZP)(n,l),r=i.data,s=i.error;return{document:null===r||void 0===r?void 0:r.document,status:null===r||void 0===r?void 0:r.status,isLoading:!r&&!s,isError:s}}},3225:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var i=n(9954),r=n.n(i),s=n(2073),o=n(7294),a=n(5861),c=n(7757),l=n.n(c),d=n(2307),u=n.n(d),h=n(1528),v=n(2723),f=n(2664),x=n.n(f),p=n(2469),j=n(3554),m=n.n(j),_=n(5893),b=function(e){var t=e.text,n=e.children,i=(0,o.useState)(!1),r=i[0],s=i[1];(0,o.useEffect)((function(){r&&setTimeout((function(){return s(!1)}),3e3)}),[r]);var a=function(){return null!=n?(0,_.jsx)("span",{children:n}):(0,_.jsxs)("span",{children:["Copy ",null===t||void 0===t?void 0:t.slice(0,12),"..."]})};return(0,_.jsxs)("button",{onClick:function(){void 0!=t&&(navigator.clipboard.writeText(t),s(!0))},className:m().copy,"data-copied":r,children:[(0,_.jsx)(a,{}),(0,_.jsx)("div",{className:m().icon,children:r?(0,_.jsx)("span",{children:"Copied!"}):(0,_.jsx)(p.TIy,{})})]})},g=n(1664);function S(e){var t=(0,o.useState)(),n=t[0],i=t[1],r=(0,o.useState)(!1),s=r[0],c=r[1],d=(0,o.useState)(!1),f=d[0],p=d[1],j=function(){var t=(0,a.Z)(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new File([e.document.content],e.document.title,{type:"text/html"}),t.next=3,v.Z.put([n],{name:e.document.title,onRootCidReady:i});case 3:r=t.sent,console.log(r),i(r),c(!0);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){return void 0!=n?(0,_.jsxs)("div",{className:u().result,children:[(0,_.jsxs)("div",{className:u().statusMessage,"data-uploadcomplete":s,children:[(0,_.jsx)(x(),{loading:!s,color:"var(--mauve11)"}),(0,_.jsx)("span",{children:s?"Success!":"Uploading document to IPFS and Filecoin\u2026"})]}),(0,_.jsx)("p",{children:"This document is being saved to IPFS and Filecoin. Documents are regularly purged. Copy the CID below to pin the file to your node."}),(0,_.jsxs)(b,{text:n,children:["Copy CID (",null===n||void 0===n?void 0:n.slice(0,8),"...)"]}),(0,_.jsx)("span",{className:u().entireCID,children:n})]}):(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:u().warning,children:(0,_.jsxs)("ol",{children:[(0,_.jsx)("li",{children:"Documents are not encrypted and accessible to anyone with the CID (url)."}),(0,_.jsxs)("li",{children:["Documents are stored in HTML and pinned to 3 geographically distributed IPFS nodes. Additionally, multiple Filecoin deals of 18 months are brokered."," ",(0,_.jsx)("a",{href:"https://web3.storage/about/#terms-of-service",children:"Refer to the Web3.Storage TOS."})]}),(0,_.jsx)("li",{children:"This is a personal side project. Documents may be deleted at any time. If you want to keep one, pin the file (CID) to your IPFS node."})]})}),(0,_.jsxs)("label",{children:[(0,_.jsx)("input",{type:"checkbox",name:"I Understand",checked:f,onChange:function(e){return p(e.target.checked)}}),(0,_.jsx)("span",{children:"I understand"})]})]})};return(0,_.jsxs)(h.fC,{open:e.open,onOpenChange:function(t){t||(i(void 0),c(!1),p(!1)),e.onOpenChange(t)},children:[(0,_.jsx)(h.aV,{className:u().overlay}),(0,_.jsxs)(h.VY,{className:u().dialog,children:[(0,_.jsx)(h.Dx,{children:'"'.concat(e.document.title,'"')}),(0,_.jsx)("p",{className:u().autosaveinfo,children:"Documents are auto-saved every second to your browser's local storage."}),(0,_.jsx)(m,{}),(0,_.jsxs)("div",{className:u().buttons,children:[(0,_.jsx)(h.x8,{className:u().cancel,children:"Cancel"}),void 0!=n?(0,_.jsx)(g.default,{href:"/view?cid=".concat(n),passHref:!0,children:(0,_.jsx)("button",{disabled:!s,className:u().save,children:"View"})}):(0,_.jsx)("button",{onClick:j,disabled:!f||null!=n,className:u().save,children:"Save"})]})]})]})}var y=n(4824),w={title:"",content:""},N=function(e){return""==e.title&&(""==e.content||"<p></p>"==e.content)},D=function(e){var t,n,i,a=JSON.parse(null!==(t=sessionStorage.getItem("session_document"))&&void 0!==t?t:JSON.stringify(w)),c=(0,o.useState)(null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:a.title),l=c[0],d=c[1],u=(0,o.useState)(null!==(i=null===e||void 0===e?void 0:e.content)&&void 0!==i?i:a.content),h=u[0],v=u[1],f=(0,o.useState)(!1),x=f[0],p=f[1];return(0,o.useEffect)((function(){var e={title:l,content:h};!function(e){N(e)?sessionStorage.removeItem("session_document"):sessionStorage.setItem("session_document",JSON.stringify(e))}(e);var t=setTimeout((function(){!function(e){if(!N(e)){var t=new Date;t.setMilliseconds(0),t.setSeconds(0),localStorage.setItem(e.title?e.title:t.toString(),e.content)}}(e)}),1e3);return function(){clearTimeout(t)}}),[l,h]),(0,_.jsxs)(y.Z,{title:l,onTitleChange:d,onSave:function(){p(!0)},children:[(0,_.jsx)("main",{className:r().main,children:(0,_.jsx)(s.Z,{editable:!0,content:h,onUpdate:function(e){var t=e.editor;return v(t.getHTML())}})}),(0,_.jsx)(S,{document:{title:l,content:h},open:x,onOpenChange:p})]})}},3554:function(e){e.exports={copy:"CopyButton_copy__Hcowv",icon:"CopyButton_icon__UYSIm"}},4021:function(e){e.exports={editor:"Editor_editor__3N0OZ",editor_content:"Editor_editor_content__3-9BK",toolbar:"Editor_toolbar__3990K",active:"Editor_active__11e98",dropdown:"Editor_dropdown__Va2Im",slidein:"Editor_slidein__klrmM",item:"Editor_item__3NfVV",slideout:"Editor_slideout__2p4A2"}},8042:function(e){e.exports={footer:"Footer_footer__1KW17",item:"Footer_item__PrU8h",branding:"Footer_branding__3WpK6"}},9954:function(e){e.exports={container:"Home_container__3sao-",main:"Home_main__1Z1aG"}},2307:function(e){e.exports={overlay:"SaveDialog_overlay__3hH5O",showOverlay:"SaveDialog_showOverlay__2DYTn",dialog:"SaveDialog_dialog__3SYX4",slidein:"SaveDialog_slidein__3qgqy",slideout:"SaveDialog_slideout__1-GeT",autosaveinfo:"SaveDialog_autosaveinfo__2V8On",result:"SaveDialog_result__1Uc_e",statusMessage:"SaveDialog_statusMessage__36Ype",entireCID:"SaveDialog_entireCID__bDp6d",warning:"SaveDialog_warning__VFclD",buttons:"SaveDialog_buttons__O3LJE",save:"SaveDialog_save__1vFEz"}},3251:function(e){e.exports={titlebar:"Titlebar_titlebar__2mYZp",share:"Titlebar_share__1bOxT",save:"Titlebar_save__3Gtq2",title:"Titlebar_title__3NpbK",icon:"Titlebar_icon__3vRLu"}}}]);